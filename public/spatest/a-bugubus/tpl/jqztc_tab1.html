<ui-view ng-controller="Tabs">

    <style>
            .spinner svg {
                width: 38px;
                height: 38px;
                stroke: green;
                fill: green;
            }

            .jqztc-tabs  .tabs {
                border-color: white;
                background-color: white;
                /* color: #9E9E9E; */
                position: fixed;
                /* top: 32px; */
            }

            .jqztc-tabs .notice {
                background: #FBEAD3;
                /* padding-left: 5px; */
                color: #e86702;
                font-size: 12px;
                line-height: 26px;
                /* margin-top: 32px; */
                position: fixed;
                top: 46px;
                left: 0;
                /* z-index: 999; */
                width: 100%;
                white-space: normal;
            }

            .jqztc-tabs .pl {
                padding-top: 0; 
                padding-bottom: 0;
                /* margin-top: 32px; */
            }

            .jqztc-tabs .xz {
                padding: 20px;
                color: #4c4848;
                font-size: 16px;
                font-weight: 500;
                /* margin-top: 32px; */
            }

            .has-tabs-top {
                top: 140px;
            }

    </style>
               
    <div class="jqztc-tabs">

        <ion-tabs class="tabs-icon-only  tab-striped tabs-top ">

            <!-- 1  -->
            <ion-tab title="产品" on-select="tab_road()">

                <div class="placeholder"></div>

                <div class="notice">
                        <p>
                            <i class="icon ion-ios-information" style="color:crimson;font-size: 14px;"></i> 
                            如行程有变，请于发车前1小时以上，申请退款，超时或验票后不能退款。
                        </p>
                </div>

                <div style="
                        display: block;
                        height: 55px;
                        text-align: center;
                        color: #3D3E3F;
                        /* margin: 0 5px; */
                        font-size: 16px;
                        position: fixed;
                        top: 75px;
                        left: 0;
                        width: 100%;
                        margin-top: 5px;
                        /* padding-bottom: 18px; */
                        border-bottom: 1px solid #ccc;
                    ">
    
                    <div class="row" style="margin-top: 5px;">

                        <div class="col col-30" style="/* text-align: left; */" ng-click="prevDay()">

                            <i class="icon ion-ios-arrow-left"></i>
                            
                            <span style="display: inline-block;margin-left: 15px;">上一天</span>
                        </div>
                
                        <div class="col col-40" ng-click="selectDay()" style="
                            background: #F2F2F2;
                            border-radius: 5px;
                            padding: 5px;
                            ">
                            <span>2011-11-11</span>
                        </div>
                
                        <div class="col col-30" style="/* text-align: right; */" ng-click="nextDay()">
                            <span style="display: inline-block;/* margin: 0 15px; */margin-right: 15px;">下一天</span>
                            <i class="icon ion-ios-arrow-right"></i>
                        </div>

                    </div>
            
                </div>

                <ion-content class="has-header lx" has-tabs="true">

                    <!-- <ion-refresher pulling-text="下拉刷新" pulling-icon="ion-ios-arrow-thin-down" on-refresh="doRefreshRoad()" spinner="dots" ></ion-refresher> -->

                    <!-- 接口 车票显示  -->
                     <ion-list>

                        <!-- 接口 数据 -->

                        <!-- 接口 数据 图片推荐 -->
                        <div ng-if="sourceComeType">

                            <!-- 有车票时 -->
                            <div ng-if="ticketsInfo1.plans != null">

                                <ion-item>
                                        
                                    <div>

                                            <div class="row info " style="padding-left: 8px;" >
                                                
                                                <div class="col">
                                                        <span>
                                                                <div class="btnfont" my-tag my-tags="ticketsInfo1_prodcutType2"></div>
                                                        </span>
                                                        
                                                        <span class="btnfont4">10：00-12：00</span>

                                                        <span class="btnfont5">单程约0分钟 剩<span class="btnfont2">0</span>座/10座</span>
                                                </div>

                                            </div>


                                            <div class="row startposition">
                                                    <div class="col">
                                                        <span class="station-address">西天</span>
                                                        <span class="station-arrow" ng-if="$scope.ticketsInfo1.plans[0].bdidType == 0"></span>
                                                        <span class="station-arrow2" ng-if="$scope.ticketsInfo1.plans[0].bdidType != 0"></span>
                                                        <span class="station-address2">东土</span>
                                                    </div>
                                            </div>
        
                                            <div class="row purchase">

                                                <div class="col col-75">

                                                        <div ng-if="$scope.ticketsInfo1.plans[0].bdidType == 0">
                                                            <div style="margin: 0 0 8px 11px;white-space: normal;" >发车地点: AAAAA</div>
                                                        </div>
                        
                                                        <div ng-if="$scope.ticketsInfo1.plans[0].bdidType != 0">
                                                            <div style="margin: 0 0 8px 11px;white-space: normal;" >发车地点: AAAAAA</div>
                                                            <div style="margin: 0 0 8px 11px;white-space: normal;" >返程地点: BBBBBB</div>                                                            
                                                        </div>

                                                </div>

                                                <div class="col">
                                                        <button class="button button-positive" ng-click="purchase(ticketsInfo1, i)">
                                                            ￥250
                                                        </button>
                                                </div>

                                            </div>
                                    </div>
                                    
                                </ion-item>

                            </div>

                            <!-- 无车票时 -->
                            <div ng-if="ticketsInfo1.plans == null">
                                
                                <!-- 有门票时 -->
                                <div ng-if="ticketsInfo1.viewInfo != null">

                                    <ion-item>
                                            
                                        <div>
                                                <div class="row startposition">
                                                        <div class="col">
                                                            <span class="station-address">{{ticketsInfo1_viewName}}</span>
                                                        </div>
                                                </div>
            
                                                <div class="row info " style="padding-left: 8px;">
            
                                                    <div class="col" style="margin-left: 10px;">
            
                                                        <span>
                                                                <div class="btnfont">门票</div>
                                                        </span>
                                                        
        
                                                    </div>
            
                                                </div>
            
                                                <div class="row purchase">
                                                    <div class="col col-75">
                                                        <div style="margin: 0 0 8px 11px;white-space: normal;" >景点地址: {{ticketsInfo1_viewAddr}}</div>
                                                    </div>
                                                    <div class="col">
                                                            <button class="button button-positive" ng-click="purchase(ticketsInfo1, i)">
                                                                购买
                                                            </button>
                                                    </div>
                                                </div>
                                        </div>
                                        
                                    </ion-item>

                                </div>

                                <!-- 无门票时 -->
                                <div ng-if="ticketsInfo1.viewInfo == null">
                                    <div style="text-align: center;margin: 8px;">
                                        <i class="icon ion-ios-information-outline" style="color:crimson;font-size: 14px;"></i>                                
                                        加载中( ¯ □ ¯ )......
                                    </div>
                                </div>
                                
                            </div>

                        </div>

                        <!-- 接口 数据 手动搜索-->                        
                        <div ng-if="!sourceComeType">

                                <ion-item ng-repeat="item in ticketsInfo2 track by $index">
                                    
                                    <!-- 有车票时 -->
                                    <div ng-if="item.plans != null">
                                            <div class="row startposition">
                                                    <div class="col">
                                                        <span class="station-address">{{item.plans[0].departName}}</span>
                                                        <span class="station-arrow" ng-if="item.plans[0].bdidType == 0"></span>
                                                        <span class="station-arrow2" ng-if="item.plans[0].bdidType != 0"></span>
                                                        <span class="station-address2">{{item.plans[0].arriveName}}</span>
                                                    </div>
                                            </div>
        
                                            <div class="row info " style="padding-left: 8px;">
        
                                                <div class="col" style="margin-left: 10px;">
        
                                                    <span>
                                                            <div class="btnfont" my-tag my-tags="item.productType"></div>
                                                    </span>
                                                    
                                                    <span class="btnfont5">
                                                        单程约{{item.plans[0].drivetime}}分钟
                                                    </span>     
        
                                                </div>
        
                                            </div>
        
                                            <div class="row purchase">
                                                <div class="col col-75">
                                                        <div ng-if="item.plans[0].bdidType == 0">
                                                            <div style="margin: 0 0 8px 11px;white-space: normal;" >发车地点: {{item.plans[0].departaddr}}</div>
                                                        </div>
                        
                                                        <div ng-if="item.plans[0].bdidType != 0">
                                                            <div style="margin: 0 0 8px 11px;white-space: normal;" >发车地点: {{item.plans[0].departaddr}}</div>
                                                            <div style="margin: 0 0 8px 11px;white-space: normal;" >返程地点: {{item.plans[1].departaddr}}</div>                                                            
                                                        </div>
                                                </div>
                                                <div class="col">
                                                        <button class="button button-positive" ng-click="purchase(item, i)">
                                                            购买
                                                        </button>
                                                </div>
                                            </div>
                                    </div>

                                    <!-- 没车票时 -->
                                    <div ng-if="item.plans == null">

                                        <!-- 有门票时 -->
                                        <div ng-if="item.viewInfo != null">

                                            <div class="row startposition">
                                                    <div class="col">
                                                        <span class="station-address">{{item.viewInfo.viewName}}</span>
                                                    </div>
                                            </div>
        
                                            <div class="row info " style="padding-left: 8px;">
        
                                                <div class="col" style="margin-left: 10px;">
        
                                                    <span>
                                                            <div class="btnfont">门票</div>
                                                    </span> 
        
                                                </div>
        
                                            </div>
        
                                            <div class="row purchase">
                                                <div class="col col-75">
                                                    <div style="margin: 0 0 8px 11px;white-space: normal;" >景点地址：{{item.viewInfo.viewaddr}}</div>
                                                </div>
                                                <div class="col">
                                                        <button class="button button-positive" ng-click="purchase(item, i)">
                                                            购买
                                                        </button>
                                                </div>
                                            </div>

                                        </div>

                                        <!-- 无门票时 -->
                                        <div ng-if="item.viewInfo == null">

                                            <div style="text-align: center;margin: 8px;">
                                                <i class="icon ion-ios-information-outline" style="color:crimson;font-size: 14px;"></i>                                
                                                加载中( ¯ □ ¯ )......
                                            </div>

                                        </div>
                                            
                                    </div>
        
                                </ion-item>

                        </div>

                    </ion-list> 

                </ion-content>

            </ion-tab>

            <!-- 2  -->
            <ion-tab title="点评" on-select="tab_comment()">

                <div class="placeholder"></div>
                <ion-content class="has-header" style="top: 44px;">

                    <ion-refresher pulling-text="下拉刷新" pulling-icon="ion-ios-arrow-thin-down" on-refresh="doRefreshComment()" spinner="dots"></ion-refresher>

                    <div class="pl">
                        <!-- 接口 评论显示  -->
                        <ion-list>
                            
                            <ion-item ng-repeat="item in commentsInfo track by $index">
                                <div class="row comment">
                                    <div class="col" style="white-space: normal;">{{item.orderhie}}</div>
                                </div>
                                <div class="row picture" >
                                    <div class="col col-33" ng-repeat="image in item.images track by $index">
                                        <img ng-if="image != null" ng-src="{{image}}" enlarge-pic alt="$index" />
                                    </div>
                                </div>
                                <div class="row name">
                                    <div class="col">{{item.username}}</div>
                                </div>
                                <div class="row star">
                                    <div class="col">
                                        <span star rating-value="item.orderScore" max="max" on-hover="onHover" on-leave="onLeave" readonly="{{readonly}}"></span>
                                        {{item.orderScore}}.0分
                                    </div>
                                </div>
                            </ion-item>
    
                            <div ng-if="isNoComment" style="text-align: center;margin: 8px;">
                                <i class="icon ion-ios-information-outline" style="color:crimson;font-size: 14px;"></i>                                
                                还没有评价( ¯ □ ¯ )
                            </div>
                            
                        </ion-list> 
                    </div>

                    <ion-infinite-scroll ng-if="hasmore" on-infinite="loadMoreComment()" distance="5%" icon="ion-loading-c"></ion-infinite-scroll>

                </ion-content>
            </ion-tab>

        </ion-tabs>
    
        <!-- 图片遮罩层  -->
        <div class="mask" close-Pic>  
            <div class="mask-box"></div>  
            <div class="big-pic-wrap">  
                <img src="" alt="" class="bigPic" />  
                <span class="close-pic">
                    <i class="icon ion-ios-close"></i>
                </span>   
            </div>  
        </div>  
    
    </div>
</ui-view>